<!DOCTYPE html>
<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Kaushan+Script&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Formulario</title>
    <style>
        h2,
        h4,
        p {

            text-align: center;

        }

        .pad {

            margin-top: 20px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            padding-bottom: 5px;

        }

        #miFormulario {

            display: block;

        }

        .padding {

            padding: 5px;

        }

        body {
            background-color: white;
        }

        .card {
            margin: 0 auto;
            max-width: 400px;
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-expand-lg fixed-top bg-dark navbar-dark" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="#page-top">Green Footprint</a>
            <button data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
                class="navbar-toggler navbar-toggler-right" type="button" aria-controls="navbarResponsive"
                aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto text-uppercase">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>

                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <header class="masthead"
            style="  background-image: url('assets/img/Balcony\ Screen\ Yellow\ 90x400\ cm\ Oxford\ Fabric.jpg'); height: 610px; margin-bottom: 200px;">
            <div class="container">
                <div class="intro-text">
                    <div class="intro-heading text-uppercase" style="color: #22663f;" data-aos="fade-down"
                        data-aos-duration="1000">Calcula tu Huella de
                        Carbono</div>

                    <div class="container mt-5" style="margin-left: 430px; overflow-x: auto;">
                        <div class="row">

                            <div class="col-md-4">
                                <div class="card" data-aos="flip-up" data-aos-duration="1000">
                                    <div class="card-body">
                                        <p style="text-align: justify;">Calcular la huella de carbono de un individuo
                                            implica considerar todas las
                                            actividades que generan emisiones de gases de efecto invernadero (GEI)
                                            directa o
                                            indirectamente. A
                                            continuación, te proporcionamos una guía básica para calcular tu huella de
                                            carbono: </p>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </header>


        <!-- Otra prueba (espero que sea la final) -->



        <form>

            <hr>

            <div class="container"
                style="background-color: rgb(255, 255, 255); padding-top: 70px; padding-bottom: 70px;"
                data-aos="fade-right" data-aos-duration="1000">

                <h4>Electricidad</h4>
                <p>Da el consumo en kWh de los 6 recibos de luz del año: </p>

                <div style="text-align: center;">


                    <div style="text-align: center;">
                        <div class="d-flex justify-content-center align-items-center" style="padding-bottom: 10px;">
                            <input class="form-control" id="electricity1" style="width: 80px;" placeholder="KWh">
                            <input class="form-control" id="electricity2" style="width: 80px;" placeholder="KWh">
                            <input class="form-control" id="electricity3" style="width: 80px;" placeholder="KWh">
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <div class="d-flex justify-content-center align-items-center">
                            <input class="form-control" id="electricity4" style="width: 80px;" placeholder="KWh">
                            <input class="form-control" id="electricity5" style="width: 80px;" placeholder="KWh">
                            <input class="form-control" id="electricity6" style="width: 80px;" placeholder="KWh">
                        </div>
                    </div>


                </div>

                <div class="padding"></div>

            </div>

            <div class="padding"></div>


            <hr>

            <div class="container"
                style="background-color: rgb(255, 255, 255); padding-top: 70px; padding-bottom: 70px;"
                data-aos="fade-left" data-aos-duration="1000">

                <h4>Agua</h4>
                <p>Da el consumo de litros o m3 de los 6 recibos del año: </p>

                <div style="text-align: center;">

                    <div style="text-align: center; padding-bottom: 10px;">
                        <div class="d-flex justify-content-center align-items-center">
                            <input class="form-control" id="water1" style="width: 110px;" placeholder="m3 | L (#1)">
                            <input class="form-control" id="water2" style="width: 110px;" placeholder="m3 | L (#2)">
                            <input class="form-control" id="water3" style="width: 110px;" placeholder="m3 | L (#3)">
                        </div>
                    </div>

                    <div style="text-align: center;">
                        <div class="d-flex justify-content-center align-items-center">
                            <input class="form-control" id="water4" style="width: 110px;" placeholder="m3 | L (#4)">
                            <input class="form-control" id="water5" style="width: 110px;" placeholder="m3 | L (#5)">
                            <input class="form-control" id="water6" style="width: 110px;" placeholder="m3 | L (#6)">
                        </div>
                    </div>

                </div>

                <div class="padding"></div>

            </div>

            <div class="padding"></div>
            <hr>

            <div class="container"
                style="background-color: rgb(255, 255, 255); padding-top: 70px; padding-bottom: 70px;"
                data-aos="fade-right" data-aos-duration="1000">

                <h4>Gas</h4>


                <div style="text-align: center;">

                    <div id="gasInputs">
                        <div class="d-flex justify-content-center align-items-center">
                            <p>Consumo anual de Gas Natural (en L):</p>
                            <input class="form-control" id="naturalGas" style="width: 85px; margin: 10px;"
                                placeholder="L (Año)" value="0">
                        </div>

                        <div class="d-flex justify-content-center align-items-center">
                            <p>Consumo anual de Gas LP (en L):</p>
                            <input class="form-control" id="lpg" style="width: 85px; margin: 10px;"
                                placeholder="L (Año)" value="0">
                        </div>
                    </div>



                </div>


                <div class="padding"></div>

            </div>


            <div style="text-align: center;">


            </div>

            <div class="padding"></div>
            <hr>

            <div class="padding"></div>




            <div class="container"
                style="background-color: rgb(255, 255, 255); padding-top: 70px; padding-bottom: 20px;"
                data-aos="fade-left" data-aos-duration="1000">

                <h4>Transporte</h4>
                <div class="d-flex justify-content-center align-items-center">
                    <p class="mb-0" style="font-size: larger;">¿Cuántos carros usa?</p>
                    <select class="form-select form-select-lg ms-2" id="numVehicles" style="width: 70px;">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>

                <!-- #1 -->

                <div id="vehicle1" class="vehicle-info">
                    <p style="opacity: 0.5; margin-top: 30px;">----- #1 -----</p>


                    <div class="d-flex justify-content-center align-items-center">
                        <p class="mb-0">¿Qué tipo de gasolina usa?</p>
                        <select class="form-select form-select-lg ms-2" id="fuelType1" style="width: 160px;">
                            <option value="g">Gasolina</option>
                            <option value="d">Diesel</option>
                        </select>
                    </div>


                    <p style="margin-top: 30px;">Da el consumo de kilometraje de cada vehículo anualmente y cuánto
                        consume
                        de litros de gasolina por
                        kilómetro: </p>

                    <div style="text-align: center;">

                        <p>Consumo de litros de gasolina por kilómetro:</p>
                        <div style="text-align: center;">
                            <div class="d-flex justify-content-center align-items-center">
                                <input class="form-control" id="fuelConsumptionPerKm1" style="width: 60px;"
                                    placeholder="L/Km">
                            </div>
                        </div>

                        <p>Consumo anual de gasolina en litros:</p>
                        <div style="text-align: center;">
                            <div class="d-flex justify-content-center align-items-center">
                                <input class="form-control" id="annualConsumption1" style="width: 60px;"
                                    placeholder="L (Año)">
                            </div>
                        </div>

                        <div class="padding"></div>

                    </div>

                </div>

                <!-- -->

                <!-- #2 -->

                <div id="vehicle2" class="vehicle-info">
                    <p style="opacity: 0.5; margin-top: 30px;">----- #2 -----</p>

                    <p>¿Qué tipo de gasolina usa?</p>


                    <div class="d-flex justify-content-center align-items-center">
                        <p class="mb-0">¿Qué tipo de gasolina usa?</p>
                        <select class="form-select form-select-lg ms-2" id="fuelType2" style="width: 160px;">
                            <option value="g">Gasolina</option>
                            <option value="d">Diesel</option>
                        </select>
                    </div>

                    <p style="margin-top: 30px;">Da el consumo de kilometraje de cada vehículo anualmente y cuánto
                        consume
                        de litros de gasolina por
                        kilómetro: </p>

                    <div style="text-align: center;">

                        <p>Consumo de litros de gasolina por kilómetro:</p>
                        <div style="text-align: center;">
                            <div class="d-flex justify-content-center align-items-center">
                                <input class="form-control" id="fuelConsumptionPerKm2" style="width: 60px;"
                                    placeholder="L/Km">
                            </div>
                        </div>

                        <p>Consumo anual de gasolina en litros:</p>
                        <div style="text-align: center;">
                            <div class="d-flex justify-content-center align-items-center">
                                <input class="form-control" id="annualConsumption2" style="width: 60px;"
                                    placeholder="L (Año)">
                            </div>
                        </div>

                        <div class="padding"></div>

                    </div>
                </div>

                <!-- -->

                <!-- #3 -->

                <div id="vehicle3" class="vehicle-info">
                    <p style="opacity: 0.5; margin-top: 30px;">----- #3 -----</p>

                    <p>¿Qué tipo de gasolina usa?</p>


                    <div class="d-flex justify-content-center align-items-center">
                        <p class="mb-0">¿Qué tipo de gasolina usa?</p>
                        <select class="form-select form-select-lg ms-2" id="fuelType3" style="width: 160px;">
                            <option value="g">Gasolina</option>
                            <option value="d">Diesel</option>
                        </select>
                    </div>

                    <p style="margin-top: 30px;">Da el consumo de kilometraje de cada vehículo anualmente y cuánto
                        consume
                        de litros de gasolina por
                        kilómetro: </p>

                    <div style="text-align: center;">

                        <p>Consumo de litros de gasolina por kilómetro:</p>
                        <div style="text-align: center;">
                            <div class="d-flex justify-content-center align-items-center">
                                <input class="form-control" id="fuelConsumptionPerKm3" style="width: 60px;"
                                    placeholder="L/Km">
                            </div>
                        </div>

                        <p>Consumo anual de gasolina en litros:</p>
                        <div style="text-align: center;">
                            <div class="d-flex justify-content-center align-items-center">
                                <input class="form-control" id="annualConsumption3" style="width: 60px;"
                                    placeholder="L (Año)">
                            </div>
                        </div>

                        <div class="padding"></div>

                    </div>
                </div>
                <!-- -->

                <!-- #4 -->
                <div id="vehicle4" class="vehicle-info">
                    <p style="opacity: 0.5; margin-top: 30px;">----- #4 -----</p>

                    <p>¿Qué tipo de gasolina usa?</p>


                    <div class="d-flex justify-content-center align-items-center">
                        <p class="mb-0">¿Qué tipo de gasolina usa?</p>
                        <select class="form-select form-select-lg ms-2" id="fuelType4" style="width: 160px;">
                            <option value="g">Gasolina</option>
                            <option value="d">Diesel</option>
                        </select>
                    </div>

                    <p>Da el consumo de kilometraje de cada vehículo anualmente y cuánto consume de litros de gasolina
                        por
                        kilómetro: </p>

                    <div style="text-align: center;">

                        <p>Consumo de litros de gasolina por kilómetro:</p>
                        <div style="text-align: center;">
                            <div class="d-flex justify-content-center align-items-center">
                                <input class="form-control" id="fuelConsumptionPerKm4" style="width: 60px;"
                                    placeholder="L/Km">
                            </div>
                        </div>

                        <p>Consumo anual de gasolina en litros:</p>
                        <div style="text-align: center;">
                            <div class="d-flex justify-content-center align-items-center">
                                <input class="form-control" id="annualConsumption4" style="width: 60px;"
                                    placeholder="L (Año)">
                            </div>
                        </div>

                        <div class="padding"></div>

                    </div>
                </div>
                <!-- -->

                <!-- #5 -->

                <div id="vehicle5" class="vehicle-info">
                    <p style="opacity: 0.5; margin-top: 30px;">----- #5 -----</p>

                    <p>¿Qué tipo de gasolina usa?</p>


                    <div class="d-flex justify-content-center align-items-center">
                        <p class="mb-0">¿Qué tipo de gasolina usa?</p>
                        <select class="form-select form-select-lg ms-2" id="fuelType5" style="width: 160px;">
                            <option value="g">Gasolina</option>
                            <option value="d">Diesel</option>
                        </select>
                    </div>

                    <p>Da el consumo de kilometraje de cada vehículo anualmente y cuánto consume de litros de gasolina
                        por
                        kilómetro: </p>

                    <div style="text-align: center;">

                        <p>Consumo de litros de gasolina por kilómetro:</p>
                        <div style="text-align: center;">
                            <div class="d-flex justify-content-center align-items-center">
                                <input class="form-control" id="fuelConsumptionPerKm5" style="width: 60px;"
                                    placeholder="L/Km">
                            </div>
                        </div>

                        <p>Consumo anual de gasolina en litros:</p>
                        <div style="text-align: center;">
                            <div class="d-flex justify-content-center align-items-center">
                                <input class="form-control" id="annualConsumption5" style="width: 60px;"
                                    placeholder="L (Año)">
                            </div>
                        </div>

                        <div class="padding"></div>

                    </div>
                </div>

            </div>

            <div class="padding"></div>

            <hr>
            <div style="text-align: center; padding-bottom: 70px; padding-top: 30px;">

                <button type="button" id="guardar" class="btn btn-success">Guardar Respuestas</button>
                <br>
                <p style="margin: 5px; color: #22663f;">Tu informe estará listo en menos de 15 segundos</p>

            </div>

        </form>

    </div>

    </div>

    <script>

        document.addEventListener('DOMContentLoaded', function () {
            initializeVehicleDisplay();
            document.getElementById('numVehicles').addEventListener('change', function () {
                var numVehicles = parseInt(this.value);
                var vehicleInfos = document.getElementsByClassName('vehicle-info');
                for (var i = 0; i < vehicleInfos.length; i++) {
                    vehicleInfos[i].style.display = 'none';
                }
                if (numVehicles === 0) {
                    for (let i = 1; i <= 5; i++) {
                        document.getElementById('annualConsumption' + i).value = 0;
                        document.getElementById('fuelConsumptionPerKm' + i).value = 0;
                    }
                    return;
                }
                // Muestra la cantidad seleccionada de campos de vehículos
                for (var i = 1; i <= numVehicles; i++) {
                    document.getElementById('vehicle' + i).style.display = 'block';
                }
            });









            // CAPTURA DE DATOS

            document.getElementById('guardar').addEventListener('click', function () {

                let a1 = document.getElementById('electricity1').value;
                let a2 = document.getElementById('electricity2').value;
                let a3 = document.getElementById('electricity3').value;
                let a4 = document.getElementById('electricity4').value;
                let a5 = document.getElementById('electricity5').value;
                let a6 = document.getElementById('electricity6').value;
                let a7 = document.getElementById('water1').value;
                let a8 = document.getElementById('water2').value;
                let a9 = document.getElementById('water3').value;
                let a10 = document.getElementById('water4').value;
                let a11 = document.getElementById('water5').value;
                let a12 = document.getElementById('water6').value;

                if (a1 === '' || a2 === '' || a3 === '' || a4 === '' || a5 === '' || a6 === '' || 
                a7 === '' || a8 === '' || a9 === '' || a10 === '' || a11 === '' || a12 === '' ) {

                    alert("Por favor, rellena los datos que se piden" )

                } else if (a1 < 0 || a2 < 0 || a3 < 0 || a4 < 0 || a5 < 0 || a6 < 0 || a7 < 0 || 
                a8 < 0 || a9 < 0 || a10 < 0 || a11 < 0 || a12 < 0) {

                    alert("Haz uso de números enteros positivos (no permitimos uso de negativos)")

                } else {

                    const userData = {
                        "electricityResponses": { "records": [] },
                        "waterResponses": { "records": [] },
                        "gasResponses": {},
                        "transportResponses": { "vehicles": [] }
                    };

                    // Captura los datos de Electricidad
                    for (let i = 1; i <= 6; i++) {
                        userData.electricityResponses.records.push({
                            "receiptNumber": i,
                            "kWhConsumption": parseInt(document.getElementById('electricity' + i).value) || 0
                        });
                    }

                    // Captura los datos de Agua
                    for (let i = 1; i <= 6; i++) {
                        userData.waterResponses.records.push({
                            "receiptNumber": i,
                            "m3Consumption": parseInt(document.getElementById('water' + i).value) || 0
                        });
                    }

                    //Captura los datos de Gas
                    userData.gasResponses.naturalGasConsumption = parseInt(document.getElementById('naturalGas').value) || 0;
                    userData.gasResponses.LPGConsumption = parseInt(document.getElementById('lpg').value) || 0;

                    // Captura los datos de Transporte
                    var numVehicles = parseInt(document.getElementById('numVehicles').value);

                    for (let i = 1; i <= numVehicles; i++) {
                        var fuelType = document.getElementById('fuelType' + i).value === 'd'; // true si es diésel, false si no
                        var annualConsumption = parseInt(document.getElementById('annualConsumption' + i).value) || 0;
                        var fuelConsumptionPerKm = parseFloat(document.getElementById('fuelConsumptionPerKm' + i).value) || 0;

                        userData.transportResponses.vehicles.push({
                            "noVehicle": i,
                            "isDiesel": fuelType,
                            "kmsDriven": annualConsumption,
                            "efficiency": fuelConsumptionPerKm
                        });
                    }

                    const userDataJSON = JSON.stringify(userData);
                console.log("hola");
                console.log(userDataJSON);
                window.location.href = 'results.html?respuestas=' + encodeURIComponent(userDataJSON);

                }

            });









            document.getElementById('gasType').addEventListener('change', function () {
                var gasType = this.value;
                if (gasType == 'natural') {
                    document.getElementById('naturalGasInput').style.display = 'block';
                    document.getElementById('lpGasInput').style.display = 'none';
                } else if (gasType == 'lp') {
                    document.getElementById('naturalGasInput').style.display = 'none';
                    document.getElementById('lpGasInput').style.display = 'block';
                }
            });

            function initializeVehicleDisplay() {
                var numVehicles = parseInt(document.getElementById('numVehicles').value);


                for (var i = 1; i <= 5; i++) {
                    document.getElementById('annualConsumption' + i).value = 0;
                    document.getElementById('fuelConsumptionPerKm' + i).value = 0;
                    document.getElementById('vehicle' + i).style.display = 'none';
                }


                for (var i = 1; i <= numVehicles; i++) {
                    document.getElementById('vehicle' + i).style.display = 'block';
                }
            }

            document.getElementById('numVehicles').addEventListener('change', function () {
                var numVehicles = parseInt(this.value);

                for (var i = 1; i <= 5; i++) {
                    document.getElementById('annualConsumption' + i).value = 0;
                    document.getElementById('fuelConsumptionPerKm' + i).value = 0;
                    document.getElementById('vehicle' + i).style.display = 'none';
                }

                for (var i = 1; i <= numVehicles; i++) {
                    document.getElementById('vehicle' + i).style.display = 'block';
                }
            });



        });

    </script>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>
</body>

</html>